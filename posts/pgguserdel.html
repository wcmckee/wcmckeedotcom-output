<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>pgguserdel | wcmckee</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="http://wcmckee.com/posts/pgguserdel.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="wcmckee">
<meta property="og:site_name" content="wcmckee">
<meta property="og:title" content="pgguserdel">
<meta property="og:url" content="http://wcmckee.com/posts/pgguserdel.html">
<meta property="og:description" content="In [13]:

    
import os
import getpass
from passlib.hash import pbkdf2_sha256
import crypt, getpass, spwd
from Crypto.PublicKey import RSA









In [14]:

    
fuliz = os.listdir('/home')








">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-02-19T02:30:06Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://wcmckee.com/">

                <span id="blog-title">wcmckee</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">Archives</a>
                </li>
<li>
<a href="../categories/index.html">Tags</a>
                </li>
<li>
<a href="../rss.xml">RSS</a>
                </li>
<li>
<a href="https://twitter.com/wcmckeedotcom">Twitter</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
    <a href="pgguserdel.ipynb" id="sourcelink">Source</a>
    </li>
                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">pgguserdel</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">wcmckee</span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2015-02-19T02:30:06Z" itemprop="datePublished" title="2015-02-19 02:30">2015-02-19 02:30</time></a></p>
                <p class="commentline">            <a href="pgguserdel.html#disqus_thread" data-disqus-identifier="cache/posts/pgguserdel.html">Comments</a>


                    </p>
<p class="sourceline"><a href="pgguserdel.ipynb" id="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">from</span> <span class="nn">passlib.hash</span> <span class="kn">import</span> <span class="n">pbkdf2_sha256</span>
<span class="kn">import</span> <span class="nn">crypt</span><span class="o">,</span> <span class="nn">getpass</span><span class="o">,</span> <span class="nn">spwd</span>
<span class="kn">from</span> <span class="nn">Crypto.PublicKey</span> <span class="kn">import</span> <span class="n">RSA</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">fuliz</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">'/home'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">fuliz</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[15]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>['tnow',
 'sjohns',
 'signinlca.py',
 'charle',
 'wcm',
 'wmck',
 'wmen',
 'webmck',
 'pjohns',
 'red',
 'wez',
 'checkthis',
 'blah',
 'joeman',
 'wkee',
 'jchick',
 'wcmckee',
 'wblack',
 'joemanz',
 'poiu',
 'poi',
 'qwe',
 'point',
 'cvb',
 'pytest',
 'figlet',
 'blag',
 'gerty',
 'jblog',
 'ssung',
 'clittle',
 'joecheck',
 'yellow']</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#Chabge password for user</span>
<span class="c">#pasuz = raw_input('User to change password: ')</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#logtest = getpass.getpass('new password: ')</span>

<span class="c">#loghash = pbkdf2_sha256.encrypt(logtest, rounds=200000, salt_size=16)</span>
<span class="c">#vercryp = pbkdf2_sha256.verify(logtest, hashez)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#Enter user to delete.</span>
<span class="c">#Even better, user to lock.</span>

<span class="c">#delusa = raw_input('User to delete: ')</span>
<span class="c">#locusa = raw_input('User to lock: ')</span>
<span class="c">#os.system('sudo passwd -l ' + locusa) </span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#Read hashed passwords from /etc/shadow</span>
<span class="c">#opshad = open('/etc/shadow', 'r')</span>
<span class="c">#opshad.read()</span>
<span class="c">#opshad.close()</span>
<span class="c">#Better to do this with a python module. spwd reads</span>
<span class="c">#shadow files done.</span>
<span class="c">#Need to getpass and ask for password, comparing to </span>
<span class="c">#the password returned from spwd</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">pan</span> <span class="o">=</span> <span class="s">'wcmckee'</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#enc_pwd = spwd.getspnam(pan)[1]</span>
<span class="c">#if enc_pwd in ["NP", "!", "", None]:</span>
<span class="c">#    print "user '%s' has no password set" % pan</span>
<span class="c">#if enc_pwd in ["LK", "*"]:</span>
<span class="c">#    print "account is locked"</span>
<span class="c">#if enc_pwd == "!!":</span>
<span class="c">#    print "password has expired"</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">gpas</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s">'Enter Username Password: '</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Enter Username Password: ········
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [32]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">encpass</span> <span class="o">=</span> <span class="n">spwd</span><span class="o">.</span><span class="n">getspnam</span><span class="p">(</span><span class="n">pan</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">KeyError</span>                                  Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-32-9aef7c527eb2&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">----&gt; 1</span><span class="ansiyellow"> </span>encpass <span class="ansiyellow">=</span> spwd<span class="ansiyellow">.</span>getspnam<span class="ansiyellow">(</span>pan<span class="ansiyellow">)</span><span class="ansiyellow">[</span><span class="ansicyan">1</span><span class="ansiyellow">]</span><span class="ansiyellow"></span>

<span class="ansired">KeyError</span>: 'getspnam(): name not found'</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="k">if</span> <span class="n">crypt</span><span class="o">.</span><span class="n">crypt</span><span class="p">(</span><span class="n">gpas</span><span class="p">,</span> <span class="n">encpass</span><span class="p">)</span> <span class="o">==</span> <span class="n">encpass</span><span class="p">:</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">'True'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"incorrect password"</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">NameError</span>                                 Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-33-4efe7353fce3&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">----&gt; 1</span><span class="ansiyellow"> </span><span class="ansigreen">if</span> crypt<span class="ansiyellow">.</span>crypt<span class="ansiyellow">(</span>gpas<span class="ansiyellow">,</span> encpass<span class="ansiyellow">)</span> <span class="ansiyellow">==</span> encpass<span class="ansiyellow">:</span><span class="ansiyellow"></span>
<span class="ansigreen">      2</span>     <span class="ansigreen">print</span> <span class="ansiyellow">(</span><span class="ansiblue">'True'</span><span class="ansiyellow">)</span><span class="ansiyellow"></span>
<span class="ansigreen">      3</span> <span class="ansigreen">else</span><span class="ansiyellow">:</span><span class="ansiyellow"></span>
<span class="ansigreen">      4</span>     <span class="ansigreen">print</span> <span class="ansiblue">"incorrect password"</span><span class="ansiyellow"></span>

<span class="ansired">NameError</span>: name 'encpass' is not defined</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [34]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#print spwd.getspnam(pan)[1]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#shpa = spwd.getspnam('wcmckee')[1]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#spwd.getspall()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#shpa</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>rsa key generated for each user and stored in their
/home/user/.ssh/ folder. Public key is emailed, added to test servers.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [38]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">new_key</span> <span class="o">=</span> <span class="n">RSA</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="mi">2048</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="mi">65537</span><span class="p">)</span>
<span class="n">public_key</span> <span class="o">=</span> <span class="n">new_key</span><span class="o">.</span><span class="n">publickey</span><span class="p">()</span><span class="o">.</span><span class="n">exportKey</span><span class="p">(</span><span class="s">"PEM"</span><span class="p">)</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="n">new_key</span><span class="o">.</span><span class="n">exportKey</span><span class="p">(</span><span class="s">"PEM"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">private_key</span> 
<span class="n">sapriv</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/home/wcmckee/.ssh/'</span> <span class="o">+</span> <span class="n">pan</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
<span class="n">sapriv</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
<span class="n">sapriv</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">print</span> <span class="n">public_key</span> 
<span class="n">papriv</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/home/wcmckee/.ssh/'</span> <span class="o">+</span> <span class="n">pan</span> <span class="o">+</span> <span class="s">'.pub'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span>
<span class="n">papriv</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">public_key</span><span class="p">)</span>
<span class="n">papriv</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAvEzwE1+D6TX2wDGUBhSZmwYkVsnVjoYiklhGBBIdg5jMHVkh
93HLlvu04KWAwSQHLIUFy4teTxovw+eo/5+VJAlelJZWcgctMsL+U1uRImD+aieV
uKEN65fCMdRIautEnPDAi9g51XleqpXvK/nGR9BRA5ibR31kcL+OYSqjFY0tlTdV
5JQ0jSZdudjgnNE33lrBwpdCUL112C4dT2r/gDfHM8icsitkhqnGxJ/xsw1sDaW8
ENSg73/lJO9Sc8j8d/mjVVVPHGs0TJneLq6Y/mF7QQq8Os0TAlXG+EnR/bX1saKa
qhxiFmKvF5ww/uSu79xkK2LajPY+DS27kia7yQIDAQABAoIBADl+HEcuAK6yBVcF
TDbXD1df9rRxB71ugxu/zBDuHwjRHHFRh6dvnUPKMp3sqnVONMqJCw3szazFSBQ+
pUD3TqgkHDat+FL0kf5PvytgZ93hU4zB7VrkAcYPHgHs2PecQeTRNVj9ehsN5bOb
99yrdLj0h+fbLn4TcRljw2szg3vOiykVe650zwu0D1J1/JxBq4bG/YndsLCPqdMk
5uZoroKx5myHnCMXRxChJAyHw+HZ1xcMGhpXE0ghqQuW8obxU4IA2T1NBWow8xCO
f1QbQR473Oat0WsBrJoHgks1SpyfO+/eomhUNG42UgeJjIWgB2s2P19nKWuTeMtc
epaAdCECgYEA2OvgGkeo1/e7k6QDS52N3s6S3MKwQksSAsRaeV3vYE7Dcb3zjNWh
d8UbzVcSN1cKVRc27j1EIBAHlRHCan45JJOeqlmnYS5g6IeF+nB74067J4gvwTbe
zciAX3NEIk5WbpdDuLzkFnajUgwiHxEVxS5WIvvUbuYpphi2lV7fLhUCgYEA3jkb
ZnJckNoNsKUbHUV/EjsEQC50kSZJ9RNh55rMfcI4uhbaJTE23eQeygtt102v0R+w
kvHRrcnjTa3mvpYL9grVfmsiSnaYL8IW75uSNgnBW7LIMsJjT7HjKok/2Sm7r4rR
sFOJCfY/jWGBpKGGlx52IJEJaF3w5acSy/4sN+UCgYBxSO4mi1oAP950Qml+KfAX
diZ4qCxI0s+7JjRhwc7rqvajBiKVYFQNKqFUYa6fvBMnURJc5R4Y6IYtMbMoznal
RXrNWDjzpbbyeSRdIDVzBoDzKkpWS4OcUKPKNXZVvDejVdgGOI+ds6Oji7aeJtwJ
uCM/7eiJaiZCGhHwfDVt6QKBgQC59xhS90k3fwMN3F2AdXQNkY3RGA88mMozaXD5
HLYcV7iZIh6UGUdNEWYitsXI8546Z0ag8fUCdnzduLXssCx6Tj6zeHxNzEk3Tjlb
ctk8l5VUY5zdvYbWXos4QXtJBH+oO4eXA5Ee4Q/2BK81UmcLd9ZrEnTI/jRmOxaj
16SxcQKBgA7E1J3fJTSEiEDu2tB5KHKe1LDZzoPda1qe1NASefJArsJYpjCU+GY6
DvvBCXv7ovWWJa7Vi1BEGZ0/INc/SCK1WVWbC9FcdLlbANW3Kp7m/bZmNZv95cU1
8gHPA8QCgATWtSBtZQr299166brw2OGv9qx0FSqLVjvyPi7FPeJZ
-----END RSA PRIVATE KEY-----
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvEzwE1+D6TX2wDGUBhSZ
mwYkVsnVjoYiklhGBBIdg5jMHVkh93HLlvu04KWAwSQHLIUFy4teTxovw+eo/5+V
JAlelJZWcgctMsL+U1uRImD+aieVuKEN65fCMdRIautEnPDAi9g51XleqpXvK/nG
R9BRA5ibR31kcL+OYSqjFY0tlTdV5JQ0jSZdudjgnNE33lrBwpdCUL112C4dT2r/
gDfHM8icsitkhqnGxJ/xsw1sDaW8ENSg73/lJO9Sc8j8d/mjVVVPHGs0TJneLq6Y
/mF7QQq8Os0TAlXG+EnR/bX1saKaqhxiFmKvF5ww/uSu79xkK2LajPY+DS27kia7
yQIDAQAB
-----END PUBLIC KEY-----
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#Spin up digital ocean server, with public key and </span>
<span class="c">#user created.</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#import digitalocean</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#tok  = ('c54ea484dcf55053743215cdb37309cb77a153e9810f35851b4701d4c8bf2881')</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#digid = digitalocean.Manager(token='c54ea484dcf55053743215cdb37309cb77a153e9810f35851b4701d4c8bf2881')</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#digid.get_account</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[4]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;bound method Manager.get_account of &lt;digitalocean.Manager.Manager object at 0xb1a49390&gt;&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#my_droplets = digid.get_all_droplets()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#lisdrop = []</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#for myd in my_droplets:</span>
<span class="c">#    print myd</span>
    <span class="c">#lisdrop.append(myd.image)</span>
    <span class="c">#</span>
<span class="c">#    lisdrop.append(myd.ip_address)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>1331748 brobeur.com
2109421 brobeurkids
2531143 wcmckee-notebook
3353353 getsdrawn
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#lisdrop</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[18]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[u'128.199.199.74', u'178.62.53.181', u'104.131.11.174', u'128.199.60.12']</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre> 
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#droplet = digitalocean.Droplet(token=tok,</span>
<span class="c">#                               name='Example',</span>
<span class="c">#                               region='nyc2', # New York 2</span>
<span class="c">##                               image= , # Ubuntu 14.04 x64</span>
 <span class="c">#                              size_slug='512mb',  # 512MB</span>
<span class="c">#                              backups=True)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansicyan">  File </span><span class="ansigreen">"&lt;ipython-input-7-cdb0ee9afb58&gt;"</span><span class="ansicyan">, line </span><span class="ansigreen">4</span>
<span class="ansiyellow">    image= , # Ubuntu 14.04 x64</span>
<span class="ansigrey">           ^</span>
<span class="ansired">SyntaxError</span><span class="ansired">:</span> invalid syntax
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#droplet.create()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">NameError</span>                                 Traceback (most recent call last)
<span class="ansigreen">&lt;ipython-input-8-e40debe66120&gt;</span> in <span class="ansicyan">&lt;module&gt;</span><span class="ansiblue">()</span>
<span class="ansigreen">----&gt; 1</span><span class="ansiyellow"> </span>droplet<span class="ansiyellow">.</span>create<span class="ansiyellow">(</span><span class="ansiyellow">)</span><span class="ansiyellow"></span>

<span class="ansired">NameError</span>: name 'droplet' is not defined</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#dimg = digid.get_all_images()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#for di in dimg:</span>
<span class="c">##    print di</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>4985495 wcmckee Debian
6126511 wcmckee Ubuntu
10690295 artcontrol final Debian
10564942 557.2.0 (beta) CoreOS
10679356 557.2.0 (stable) CoreOS
10679369 593.0.0 (alpha) CoreOS
6370882 20 x64 Fedora
6370885 20 x32 Fedora
6370968 19 x64 Fedora
6370969 19 x32 Fedora
6372321 5.10 x64 CentOS
6372425 5.10 x32 CentOS
6372581 6.0 x64 Debian
6372662 6.0 x32 Debian
9640922 21 x64 Fedora
9801948 14.04 x32 Ubuntu
9801950 14.04 x64 Ubuntu
9801951 14.10 x32 Ubuntu
9801954 14.10 x64 Ubuntu
10144573 10.1 FreeBSD
10321756 12.04.5 x64 Ubuntu
10321777 12.04.5 x32 Ubuntu
10321819 10.04 x64 Ubuntu
10321870 10.04 x32 Ubuntu
10322059 7.0 x64 Debian
10322378 7.0 x32 Debian
10322623 7 x64 CentOS
10325922 6.5 x64 CentOS
10325992 6.5 x32 CentOS
6376601 Ruby on Rails on 14.04 (Nginx + Unicorn) Ubuntu
6423475 WordPress on 14.04 Ubuntu
6732690 LEMP on 14.04 Ubuntu
6732691 LAMP on 14.04 Ubuntu
6798184 MEAN on 14.04 Ubuntu
8375425 Drupal 7.34 on 14.04 Ubuntu
8412876 Magento 1.9.1.0 on 14.04 Ubuntu
8953301 ELK Logging Stack on 14.04 Ubuntu
9918633 Ghost 0.5.8 on 14.04 Ubuntu
9967718 Django on 14.04 Ubuntu
10163059 FreeBSD AMP on 10.1 FreeBSD
10274087 GitLab 7.7.1 CE on 14.04 Ubuntu
10321359 MediaWiki 1.24.0 on 14.04 Ubuntu
10462503 Drone on 14.04 Ubuntu
10507592 node-v0.12.0 on 14.04 Ubuntu
10563620 Dokku v0.3.14 on 14.04 Ubuntu
10565666 ownCloud 8.0 on 14.04 Ubuntu
10581649 Docker 1.5.0 on 14.04 Ubuntu
7572830 Redmine on 14.04 Ubuntu
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#opdel = os.listdir('/home/wcmckee/signinlca/deleteusers')</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="c">#opdel</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[24]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>[]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">usrtodel</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">'Account to delete: '</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">locacc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">'sudo passwd -l '</span> <span class="o">+</span> <span class="n">usrtodel</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">locacc</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython2"><pre><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">'mv '</span> <span class="o">+</span> <span class="s">'  '</span> <span class="o">+</span> <span class="s">'/home/wcmckee/signinlca/usernames/'</span> <span class="o">+</span> <span class="n">usrtodel</span> <span class="o">+</span> <span class="s">' /home/wcmckee/signinlca/username/deleteusers/'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
    </div>
  </div>

    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="signinlca.html" rel="prev" title="signinlca">Previous post</a>
            </li>
            <li class="next">
                <a href="bbknikola.html" rel="next" title="bbknikola">Next post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Comments</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="nikolademo",
            disqus_url="http://wcmckee.com/posts/pgguserdel.html",
        disqus_title="pgguserdel",
        disqus_identifier="cache/posts/pgguserdel.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="nikolademo";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2015         <a href="mailto:will@artcontrol.me">wcmckee</a>
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
<img alt="Creative Commons Attribution 4.0 International License" style="border-width:0; margin-bottom:12px;" src="http://mirrors.creativecommons.org/presskit/buttons/88x31/svg/by.svg"></a>
<br><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">wcmckee.com</span> by 
<a xmlns:cc="http://creativecommons.org/ns#" href="http://wcmckee.com" property="cc:attributionName" rel="cc:attributionURL">wcmckee</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
<br>Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="http://wcmckee.com" rel="dct:source">http://wcmckee.com</a>.


            
        </footer>
</div>
</div>

            <script src="../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
